<!DOCTYPE html>
<html>
<head>
    <title>Flux Potato Block Countdown</title>
    <meta charset="UTF-8">
    <style>
        body {
            background-color: #0f172a;
            color: #ffffff;
            font-family: Arial, sans-serif;
            text-align: center;
            padding-top: 50px;
        }
        h1 {
            color: #22c55e;
        }
        #countdown {
            font-size: 2em;
            margin-top: 20px;
        }
        .box {
            background: #1e293b;
            padding: 20px;
            border-radius: 10px;
            display: inline-block;
        }
    </style>
</head>
<body>

<h1>ðŸ¥” Flux Potato Block Countdown</h1>

<div class="box">
    <p>Current Block: <span id="currentBlock">Loading...</span></p>
    <p>Next Potato Block: <span id="nextPotato">Loading...</span></p>
    <div id="countdown">Loading...</div>
</div>

<script>
const POTATO_INTERVAL = 52920;
const LAST_POTATO = 2358720;

async function fetchBlockHeight() {
    try {
        const response = await fetch("https://api.runonflux.io/daemon/getblockchaininfo");
        const data = await response.json();

        const currentBlock = data.data.blocks;
        document.getElementById("currentBlock").innerText = currentBlock;

        const blocksSinceLast = currentBlock - LAST_POTATO;
        const cyclesPassed = Math.floor(blocksSinceLast / POTATO_INTERVAL);
        const nextPotato = LAST_POTATO + ((cyclesPassed + 1) * POTATO_INTERVAL);

        document.getElementById("nextPotato").innerText = nextPotato;

        const remaining = nextPotato - currentBlock;

        document.getElementById("countdown").innerText =
            remaining + " blocks remaining";

    } catch (error) {
        document.getElementById("countdown").innerText = "Error fetching block data";
    }
}

fetchBlockHeight();
setInterval(fetchBlockHeight, 30000);
</script>

</body>
</html>